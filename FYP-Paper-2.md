
**Performance Analysis of a Full Duplex MAC Protocol with Binary Exponential Backoff**

**Abstract** - The full duplex mode in wireless communication allows simultaneous data transmission and reception on a single channel, hence increasing the data rate and reducing the access delay. In this paper, we propose a TDMA-based medium access control protocol to realize the benefit of full duplex communication. This protocol deploys the binary exponential backoff mechanism to resolve contention. We develop an analytical model to evaluate its performance. This protocol is suitable for future generations of mobile telecommunication networks, such as 5G networks.

**Keywords** - Full duplex; MAC; Exponential backoff.

---

### I. INTRODUCTION

The next generation wireless networks, such as the fifth generation mobile telecommunications networks (5G networks) and the new generation of Wireless Local Area Networks (WLANs), need to support higher user density. This is due to the tremendous success of smart phones and increasing deployment of the Internet of Things (IoT) technology. Moreover, users are running more and more bandwidth intensive and time-sensitive multimedia applications. These two factors drive the next generation wireless networks to provide much higher data rates. For example, 5G networks target to provide a data rate of several orders of magnitude higher than that of 4G networks.

In order to enable the next generation wireless networks to deliver a tremendously increased data rate, the spectrum efficiency needs to be significantly enhanced. This can be achieved by a multitude of new technologies, such as spectrum efficiency optimization, cooperative communications, multiple-input multiple-output (MIMO) [1], non-orthogonal multiple access [2][3] and full duplex (FD) transmission [4][5].

In currently deployed wireless networks, nodes cannot transmit and receive on the same frequency band at the same time. Either frequency-division duplexing (FDD) or time-division duplexing (TDD) transmission techniques are commonly deployed. Both of them operate in half-duplex modes. In FDD, two frequency channels are needed to support bidirectional communications; one for uplink and one for downlink. In TDD mode, the uplink and downlink data are sent in orthogonal time-slots. On the other hand, FD transmission allows a node to simultaneously send and receive data on a single channel.

In the approach proposed in [4], FD transmission is realized by the use of analog and digital cancellation. It requires one receiving (RX) antenna, one transmitting (TX) antenna and a balanced/unbalanced (Balun) transformer to be installed at each node. First, analog cancellation is used. The signal from the TX antenna is cancelled at the RX antenna by the inverted signal generated by the Balun transformer. It can cancel a minimum of 45 dB across a 40 MHz spectrum. Then, digital cancellation is employed to further reduce self-interference by up to 73 dB for 10 MHz OFDM signal. In [5], a design for a wideband multiple-antenna self-interference canceller for orthogonal frequency-division-multiplexing (OFDM) systems is presented. It combines three methods to reduce the self-interference. First, multiple antennas are suitably placed on a node for passive suppression. It maximizes the attenuation of the self-interference signal over the channel between the transmitter and receiver antennas of the same node. Second, a per-subcarrier per-receive-antenna analog self-interference canceler is used. Third, a digital self-interference canceller in baseband is implemented. The extensive experimental results demonstrate that this three-stage design achieves a minimum and maximum cancellation of 70 dB and 100 dB, respectively, with a median of 85 dB.

When FD transmission is enabled, it can be deployed in two different modes. As shown in Figure 1(a), both nodes 1 and 2 are equipped with one TX antenna and one RX antenna. They can send and receive data simultaneously over the single channel. This mode is referred to as FD-bidirectional transmission. Alternatively, as shown in Figure 1(b), node 1 is sending data to node 2. While node 2 is receiving the data, it can immediately forward it to node 3. In other words, node 2 is simultaneously receiving and transmitting. This mode is referred to as FD-relay transmission. For this mode, only node 2 needs to have two antennas installed; one TX antenna and one RX antenna. Since node 1 and node 3 do not transmit and receive simultaneously, each of them only need to have one antenna.



Having FD transmission enabled at the physical layer, there is a need for a suitable medium access control (MAC) protocol to realize its benefit. In [6], a FD MAC protocol is proposed for nodes equipped with directional antennas to improve the throughput of a multi-hop flow using the FD-relay mode. In [7], a unified MAC protocol is proposed to establish either FD-bidirectional or FD-relay transmission. The protocol is based on the RTS/CTS mechanism. In [8]-[10], MAC protocols are proposed for the case that only the base station has FD capability while user nodes still operate in half duplex mode. In [11][12], FD MAC protocols are proposed for the more general case that both base station and user nodes have FD capability. In [13], the authors propose a CSMA-based MAC protocol in which transmitters use FD techniques to monitor the channel usage during transmitting, and backoff as soon as collision is observed.

So far, MAC protocols for FD transmission are mainly designed for WLANs. In this paper, we propose a MAC protocol for cellular networks in which both base stations and user equipment (UE) can support FD transmission. The proposed protocol is contention based and requires UE to use the binary exponential backoff (BEB) algorithm for contention resolution. The remainder of this paper is organized as follows. In Section II, we present our proposed MAC protocol. Then, in Section III, we develop an analytical model to characterize the average packet delay and its standard deviation under the saturated condition. In Section IV, we verify the accuracy of our model by comparing with simulation results. Finally, Section V concludes the paper.

---

### II. MAC PROTOCOL

The frame structure for the proposed MAC protocol is shown in Figure 2. In this protocol, the channel is time slotted and organized into frames. Each frame has a duration of $\mathcal{E}$, and consists of a request subframe, a full duplex data subframe, an information subframe and a downlink data subframe, with duration $T_{r}$, $T_{f}$, $T_{i}$ and $T_{h}$, respectively.

A request subframe has m request slots, each of length t. In order to gain the right to send a data packet, an UE first needs to send a bandwidth request to a randomly chosen slot in the request subframe. If there is only one request submitted to the request slot, the request is successful. On the other hand, if there are two or more UE submitting their requests in the same request slot, collision occurs.

In a full duplex data subframe, there are d data slots. Upon receiving the bandwidth requests, the BS will announce the contention result in the full duplex map (FD Map) of the information subframe. It assigns a data slot in the full duplex data subframe of the next frame to each successful UE. Each data slot is of length T (T » t), which is the transmission time of a data packet (all packets are assumed to have the same length throughout this paper). Here, we assume that a data slot is randomly chosen and assigned to a successful UE. Since full duplex transmission is supported, when an UE is transmitting a packet to the BS in the assigned data slot, the BS can simultaneously send downlink traffic to the corresponding UE. For those unsuccessful UE, they need to execute the BEB algorithm to resolve contention. The complete process of sending request is described as below.

Initially, before sending a request each UE starts its own backoff process by randomly selecting a backoff time in the range $[0, C W-1]$, where CW is the contention window. Here the backoff time represents the number of request slots that must pass before the request can be submitted. At the first attempt, CW is set equal to W, the minimum contention window. If the request is unsuccessful, then the contention window size is multiplied by $\lambda=2$, and another backoff period is initiated. This process is repeated for each subsequent request failure, i.e., $W_{i}=\lambda^{i} W$, where i is the number of re-attempts. Window doubling continues until the maximum possible value, $C W_{\max}=\lambda^{r} W, r\geq 1$, is reached. If the request is unsuccessful after r attempts, the window is maintained at $C W_{\max}$ for the remaining attempts until the request is successful, or until the maximum number of attempts, $R\geq r$, is reached. If the request is still unsuccessful after R attempts, the packet is discarded.

In Figure 2, we show an example in which an UE sends a request in frame 1 but fails. It carries out the BEB process and finally can have a duplex data transmission in frame n. If the traffic between UE and the BS is symmetric, there is no need to provision downlink data subframes. However, to cater for the case in which some UE only have downlink traffic, the downlink data subframe with b data slots is provisioned. When an UE only has downlink traffic, the BS will inform it in the downlink map (DL Map) of the information subframe to receive a packet in a particular data slot in the downlink data subframe.



---

### III. ANALYTICAL MODEL

Consider a cell with N UE. Assume that all UE are in saturated condition, i.e., they always have packets to send. The packet delay X is defined as the time duration from its first bandwidth request until the packet transmission has finished. Note that if the bandwidth reservation of a packet is successful, the packet will be removed from the head of the queue into a temporary buffer and transmitted to the channel in the coming full duplex data subframe. Thus, the bandwidth request of the next packet (now become the head of the queue) can be sent in the request subframe of the next frame.

#### A. Unsuccessful Request Probability

Let p be the probability that a request sent by an UE is unsuccessful, which is given by

$$p=1-\left(1-p_{c}\right)\left(1-p_{d}\right),\qquad(1)$$

where $p_{c}$ and $p_{d}$ are probabilities that a request sent by an UE is unsuccessful due to collision with other requests, or lack of data slots in the full duplex data subframe of the next frame, respectively. In the following, we show that both $p_{c}$ and $p_{d}$ can be expressed as a function of the probability p, hence fixed point equations can be established to calculate the individual probabilities.

A request is successfully transmitted on the first attempt with probability 1 - p (ignoring a normalisation factor that we will introduce later). Recall that the contention window is initially set to W, the average number of elapsed backoff slots before such a request is $\frac{m}{2}+(W-1)/ 2$. The first term is due to the fact that an UE cannot start a new backoff period for its next request immediately after the previous one in the same frame but has to wait until the next frame. And because requests are uniformly chosen among the m request slots in each frame, the average number of backoff slots wasted until the next frame is $\frac{m}{2}$. The second term represents the average number of backoff slots an UE has to wait before attempting to send a request according to the BEB mechanism described in Section II.

If the first transmission fails, the request is successfully transmitted on the second attempt with probability p(1-p). The average number of elapsed backoff slots in this case is $\frac{m}{2}+(\lambda W-1)/ 2$. Continuing this argument until the $R^{t h}$ attempt yields the overall average number of elapsed backoff slots before a successful request transmission:

$$\begin{align*} B_{avg}\quad=\quad&\frac{m}{2}+\eta\sum_{i=0}^{r-1}p^{i}(\frac{\lambda^{i}W-1}{2})+\\ &\eta(\frac{\lambda^{r}W-1}{2})\sum_{i=r}^{R-1}p^{i}\\ =\quad&\frac{m}{2}+\frac{\eta W(1-(\lambda p)^{r})}{2(1-\lambda p)}-\\ &\frac{1-p^{r}}{2(1-p^{R})}+\frac{(\lambda^{r}W-1)(p^{r}-p^{R})}{2(1-p^{R})},\end{align*}\qquad(2)$$

where

$$\eta=(1-p)(1-p^{R})^{-1}$$

and $\left(1-p^{R}\right)$ is a normalisation factor.

Note that assuming a request will be eventually successful, then $B_{\text{avg}}$ is the average number of backoff slots an UE has to wait before sending requests, i.e., it is an average inter-arrival time of requests in this system. Therefore, the probability that an UE attempts to send the request in a slot is given by

$$\tau=1/(B_{avg}+1).$$

Since there are N saturated UE, the probability $p_{c}$ that a request sent by an UE is unsuccessful due to collision with other requests can be expressed as

$$p_{c}=1-(1-\tau)^{N-1}.\qquad(3)$$

The probability that there are $j, 0\leq j\leq k=\min(m, N)$ successful requests among m request slots can be approximated based on a truncated binomial distribution

$$\begin{align*} Q(j)&=\frac{\binom{m}{j}\xi^j(1-\xi)^{m-j}}{\sum\limits_{i=0}^k\binom{m}{i}\xi^i(1-\xi)^{m-i}},\end{align*}\qquad(4)$$

where $\xi=N\tau(1-\tau)^{N-1}$ is the probability that a request sent in a request slot will be successful given that there are N UE each attempting to send requests with probability $\tau$.

The probability that a request is unsuccessful due to lack of data slots in the subsequent frame can then be expressed as

$$\begin{align*} p_d&=\frac{\sum_{j=d+1}^k(j-d) Q(j)}{\sum_{j=0}^k j Q(j)},\end{align*}\qquad(5)$$

recalling that d is the number of data slots set by BS in the full duplex data subframe. Equations (1), (3) and (5) create a fixed point formulation from which p can be computed numerically. Note that such a fixed point analysis is used in [14] to model the performance of the IEEE 802.11 distributed coordination function.

#### B. Delay Model

Consider a tagged UE. Let U be a random variable (RV) representing the time duration from the time the UE sends a request until the end of the request subframe. Assume that after certain number of attempts, the request is successful and a data slot is assigned in a full duplex data subframe. Let V be a RV representing the time duration between the beginning of that subframe and the end of the assigned data slot.

Given that the tagged UE is successful in its first attempt of sending a request, the packet delay X is therefore given by

$$X^{(0)}=U+\mathcal{E}+V\quad\text{w.p.}\quad 1-p,$$

where $\mathcal{E}$ is the duration of a frame and equal to $T_{r}+ T_{f}+ T_{i}+$ $T_{h},T_{r}=mt,T_{f}=dT$, and w.p. stands for “with probability”.

For the case when the tagged UE is not successful in its first attempt but is successful in the second attempt of sending request, the service time can be expressed as

$$X^{(1)}=U+Y^{(1)}+V\quad\text{ w.p.}\quad p(1-p),$$

where $Y^{(1)}$ is a random sum of a frame duration $\mathcal{E}$, and $p(1-p)$ is the probability that the request is successful in the second attempt. The variable $Y^{(1)}$ is originated from the fact that an UE will have to wait for a random backoff period before sending its request which is uniformly chosen from the new contention window. In this second attempt of sending request, an UE will choose its backoff time uniformly in $\left[0, W_{1}-1\right]; W_{1}=\lambda W$ and $Y^{(1)}$ can be calculated as

$$ Y^{(1)}=\sum_{i=0}^1 K^{(i)}\mathcal{E},$$

where $K^{(i)}$ is a discrete random variable with the following distribution:

$$ K^{(i)}=\left\{\begin{array}{ll} 1&\text{ w.p.} m/ W_i,\\ 2&\text{ w.p.} m/ W_i,\\ &...\\ A_i-1&\text{ w.p.} m/ W_i,\\ A_i&\text{ w.p.} 1-\frac{\left(A_i-1\right) m}{W_i},\end{array}\right.$$

where $A_{i}=\left\lceil W_{i}/ m\right\rceil, i=1,.., R-1$. The $\lceil z\rceil$ operator gives a minimum integer value that is greater or equal to z. For $i=0$, we define $K^{(0)}=1$ w.p. one. Note that if $A_{i}=1$, i.e., $m\geq W_{i}$, then $K^{(i)}=1$ with probability one.

In general, the packet delay X can be expressed as

$$X=X^{(i)}\quad\text{ w.p.}\quad\eta p^{i}, 0\leq i\leq R-1,$$

where

$$ X^{(i)}=U+Y^{(i)}+V,$$

and

$$ Y^{(i)}=\sum_{j=0}^i K^{(j)}\mathcal{E}.$$

To complete the expression of X, we now determine the probability mass function (pmf) of U and V. As the tagged UE uniformly chooses the backoff before sending a request, the pmf of the U can be approximated as below

$$U=\left\{\begin{array}{lll}m t&\text{ w.p.}& 1/ m\\ (m-1) t&\text{ w.p.}& 1/ m\\ \vdots&&\\ t&\text{ w.p.}& 1/ m\end{array}\right.$$

As the BS uniformly allocates data slots among successful requests, the pmf of V can be expressed as

$$V=\begin{cases}T&\text{w.p.}\sum_{j=0}^{k^{\prime}-1}\frac{1}{j+1}\,q(j),\\ 2T&\text{w.p.}\sum_{j=1}^{k^{\prime}-1}\frac{1}{j+1}\,q(j),\\ \vdots&\\ k^{\prime}T&\text{w.p.}\quad\frac{1}{k^{\prime}}\,q(k^{\prime}-1),\end{cases}\qquad(10)$$

where $q(j)$ is the probability that there are $j\geq 0$ successful requests other than the tagged UE in a frame. The probability $q(j)$ follows a truncated binomial distribution

$$ q(j)=Q(j+1)/(1-Q(0)), 0\leq j\leq k-1,$$

where $k=\min(m, N)$ and $k^{\prime}=\min(k, d)$ and $Q(j)$ is given in (4).

From (7), we obtain

$$ E[X]=\eta\sum_{i=0}^{R-1} p^i E\left[X^{(i)}\right]$$

$$\operatorname{Var}[X]=\eta\sum_{i=0}^{R-1} p^i\left(\operatorname{Var}\left[X^{(i)}\right]+\left(E\left[X^{(i)}\right]-E[X]\right)^2\right).$$

The mean and variance of $X^{(i)}$ are derived from (8) as

$$\begin{align*} E\left[X_i\right]&=E[U]+E\left[Y^{(i)}\right]+E[V],\\ \operatorname{Var}\left[X_i\right]&=\operatorname{Var}[U]+\operatorname{Var}\left[Y^{(i)}\right]+\operatorname{Var}[V],\end{align*}$$

where

$$\begin{align*}E\left[Y_{i}\right]&=\mathcal{E}\sum_{j=0}^{i} E\left[K^{(j)}\right],\\ \operatorname{Var}\left[Y_{i}\right]&=\mathcal{E}^{2}\sum_{j=0}^{i}\operatorname{Var}\left[K^{(j)}\right].\end{align*}$$

From (6), it can be shown that

$$ E\left[K^{(j)}\right]=\begin{cases}1& j=0\\ A_j-A_j\left(A_j-1\right)\frac{m}{2\lambda^j W}& j=1,.., r-1\\ A_j-A_j\left(A_j-1\right)\frac{m}{2\lambda^r W}& j=r,.., R-1\end{cases},$$

and

$$\operatorname{Var}\left[K^{(j)}\right]=\overline{K^{(j)^2}}-\left(E\left[K^{(j)}\right]\right)^2,$$

where $\overline{K^{(j)^{2}}}$ is the second moment of $K^{(j)}$ and is given by

$$\begin{align*}&\overline{K^{(j)}{}^2}=\left\{\begin{array}{ll} 1& j=0,\\ A_j^2-A_j\left(A_j-1\right)\left(1+4 A_j\right)\frac{m}{6\lambda^j W}& j=0,1,.., r-1,\\ A_j^2-A_j\left(A_j-1\right)\left(1+4 A_j\right)\frac{m}{6\lambda^r W}& j=r,.., R-1.\end{array}\right.\\ &\end{align*}$$

It remains to determine $E[U],\operatorname{Var}[U], E[V]$ and $\operatorname{Var}[V]$ from (9) and (10), which can be expressed as

$$\begin{align*} E[U]&=(m+1) t/ 2,\\ \operatorname{Var}[U]&=\bar{U}^2-(E[U])^2,\text{ where}\\ \bar{U}^2&=(m+1)(2 m+1) t^2/ 6,\text{ and}\end{align*}$$

$$\begin{align*}E[V]&=T\sum_{j=0}^{k-1} q(j)\sum_{i=0}^{j}\frac{i+1}{j+1},\\ \operatorname{Var}[V]&=\bar{V}^{2}-(E[V])^{2},\text{ where}\\ \bar{V}^2&=T^2\sum_{j=0}^{k-1} q(j)\sum_{i=0}^{j}\frac{(i+1)^{2}}{j+1},\end{align*}$$

and $q(j)$ is given in (11).

The mean and variance of packet delay are then calculated by substituting (13), (14), (15) into (12).

---

### IV. NUMERICAL RESULTS

In this section, we validate the analytical model by simulation. For this purpose, we have built a discrete event simulator by C++ to generate simulation results. The duration of each simulation run is 5,000 seconds, with a warm-up period of 500 seconds. From Figures 3, 4(a) and 4(b), it can be seen that simulation and analytical results match quite well. It confirms that our model is sufficiently accurate. At the same time, we also use the developed analytical model to investigate the impact of different parameters on the performance of the MAC protocol.

The system parameters used throughout this section are as follows. With a 25 MHz spectrum, the 64-QAM modulation scheme is used to achieve a data rate of 120 Mbps. A mini slot is a basic unit of different time slots, and has a duration of $\frac{1}{2500}$ millisecond. Each bandwidth request has a duration of 6 mini slots. Each data slot has a duration of 94 mini slots, which allows the transmission of approximately 0.5 KB data at 120 Mbps. The information subframe has a duration of 10 request slots. Also, $W=8, r=3$, and $R=5$.

First, we set m = d = 12, and evaluate the failure probability of a request for different N. The result is shown in Figure 3. As expected, the more UE in the network, the higher the collision probability that requests would experience.



Having the probability of unsuccessful request, the mean and standard deviation of the packet delay are computed as described in Section III-B. These analytical values together with the simulation results are plotted against N in Figures 4(a) and 4(b). As shown in the figures, reducing the number of data slots available in the full duplex data subframe causes an increasing in both mean and standard deviation of the packet delay. This is because when there are less data slots available, the failure probability of requests increases, and thus the average backoff time increases. As a result, the mean and standard deviation of packet delay increase.

Next, we investigate the impact of the size of the downlink data subframe. We consider that the traffic is close to symmetric and, only occasionally, the BS has to rely on the downlink data subframe to deliver packets to UE. In that case, the number of data slots in this subframe can be much smaller than d. Here, we use the case of b = 12, m = 12, N = 20 as a reference, and calculate how much (measured in %) delay is reduced when b is reduced from 12 to 2. The results are plotted in Figure 5.

It can seen that when $b=2$, the mean delay is reduced by about 37%. Clearly, the reduction of delay is due to a smaller frame size as th decreases with b. This reflects one of the benefits of the full duplex MAC protocol.

---

### V. CONCLUSION

In this paper, we have proposed a MAC protocol for mobile telecommunication networks which support full duplex wireless communication. In this MAC protocol, binary exponential backoff is used to resolve contention. We have also developed an analytical model for performance evaluation in terms of request failure probability, mean and standard deviation of packet delay. Explicit forms of these performance metrics have been derived. The model has been validated by simulation results. The numerical results have shown the impact of various parameters on the performance metrics. Moreover, packet delay can be significantly reduced due to the deployment of full duplex wireless communication.
